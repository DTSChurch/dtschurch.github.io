<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mailgun Toolbox Setup | DTS Dev Docs</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,500;9..144,700&family=Work+Sans:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../assets/styles.css" />
  </head>
  <body>
    <div class="site-bg" aria-hidden="true">
      <div class="glow glow-a"></div>
      <div class="glow glow-b"></div>
      <div class="grid-overlay"></div>
    </div>

    <header id="site-header"></header>

    <main class="page docs-shell">
      <aside class="docs-nav reveal">
        <h2>Mailgun Toolbox</h2>
        <a href="./">Overview</a>
        <a href="setup.html">Setup &amp; Configuration</a>
        <a href="dashboard.html">Dashboard Guide</a>
        <a href="troubleshooting.html">Troubleshooting &amp; Support</a>
        <a href="nerd-talk.html">Nerd Talk</a>
        <a href="reference/">Developer Reference</a>
      </aside>

      <div class="docs-main">
        <section class="panel reveal">
          <p class="eyebrow">Setup Guide</p>
          <h1>Installation &amp; Configuration</h1>
          <p>
            Get the Mailgun Toolbox installed and connected to your Mailgun account.
            Most installations take just a few minutes.
          </p>
        </section>

        <section class="panel reveal">
          <h2>Install the plugin</h2>
          <ol>
            <li>In Rock, navigate to <strong>Admin Tools &gt; System Settings &gt; Installed Plugins</strong>.</li>
            <li>Click <strong>Upload Plugin</strong> and select the <code>mailgun-toolbox-x.x.x.plugin</code> file.</li>
            <li>Rock installs the DLL and Obsidian files automatically.</li>
            <li>Restart Rock (or recycle the application pool) to load the assembly.</li>
          </ol>
          <details>
            <summary><strong>Advanced: Manual install</strong></summary>
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th>Source</th>
                    <th>Destination</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><code>com.dtschurch.ManagedMail/bin/Release/net472/com.dtschurch.ManagedMail.dll</code></td>
                    <td><code>RockWeb/Bin/</code></td>
                  </tr>
                  <tr>
                    <td><code>com.dtschurch.ManagedMail.Obsidian/dist/mailgunDomainStats.obs.js</code></td>
                    <td><code>RockWeb/Plugins/com_dtschurch/ManagedMail/</code></td>
                  </tr>
                </tbody>
              </table>
            </div>
            <p class="footer-note">
              Restart Rock after copying the files. The plugin migrations run automatically on startup.
            </p>
          </details>
        </section>

        <section class="panel reveal">
          <h2>What the plugin creates</h2>
          <p>On first startup the migrations will automatically:</p>
          <ol>
            <li>Register the <strong>Mailgun Domain Stats</strong> block type under <strong>DTSChurch &gt; Mail</strong>.</li>
            <li>Create two <strong>Global Attributes</strong>: <code>MailgunApiKey</code> and <code>MailgunDomain</code>.</li>
            <li>Create a <strong>Mailgun Toolbox</strong> page under <strong>Rock Shop / Installed Plugins</strong> with the block already added.</li>
          </ol>
          <p>
            After restart, navigate to <strong>Admin Tools &gt; Installed Plugins &gt; Mailgun Toolbox</strong>.
          </p>
        </section>

        <section class="panel reveal" id="configuration">
          <h2>Configuration</h2>

          <h3>1. Verify your Mailgun email transport</h3>
          <p>
            Before configuring the plugin, make sure Rock is already set up to send email through Mailgun:
          </p>
          <ol>
            <li>Go to <strong>Admin Tools &gt; Communications &gt; Communication Transports</strong>.</li>
            <li>Confirm that <strong>Mailgun HTTP</strong> is listed and marked as active.</li>
            <li>If Mailgun is not your active transport, configure it first per Rock&rsquo;s documentation.</li>
          </ol>
          <p class="footer-note">
            The Mailgun Toolbox reads stats from the same Mailgun domain that Rock uses to send
            email. If Rock is not configured to send through Mailgun, the dashboard will have no
            data to display.
          </p>

          <h3>2. Set the Mailgun API Key</h3>
          <ol>
            <li>Go to <strong>Admin Tools &gt; General Settings &gt; Global Attributes</strong>.</li>
            <li>Find <strong>Mailgun API Key</strong> (added by the plugin migration).</li>
            <li>Enter your Mailgun private API key (starts with <code>key-...</code> or is a hex string).</li>
            <li>Click <strong>Save</strong>.</li>
          </ol>

          <h3>3. Set the Mailgun Domain</h3>
          <ol>
            <li>In the same Global Attributes page, find <strong>Mailgun Domain</strong>.</li>
            <li>Enter the sending domain configured in Mailgun (e.g. <code>mg.yourchurch.com</code>).</li>
            <li>Click <strong>Save</strong>.</li>
          </ol>

          <h3>4. Configure the block (Optional)</h3>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Setting</th>
                  <th>Description</th>
                  <th>Default</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>Default Date Range</strong></td>
                  <td>Date range filter applied on page load. Options: Current Month, Previous Month, Last 7/30/90 Days.</td>
                  <td>Current Month</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <section class="panel reveal">
          <h2>Verify it&rsquo;s working</h2>
          <ol>
            <li>Navigate to <strong>Admin Tools &gt; Installed Plugins &gt; Mailgun Toolbox</strong>.</li>
            <li>You should see the Overview tab with delivery rate cards and charts.</li>
            <li>If you see data for the current month, the plugin is correctly configured.</li>
            <li>If you see zeros or an error message, see the <a href="troubleshooting.html">Troubleshooting page</a>.</li>
          </ol>
          <div class="screenshot-placeholder">
            <strong>Screenshot: Dashboard after successful setup</strong>
            Replace this with a screenshot of the Overview tab showing populated data.
          </div>
        </section>
      </div>
    </main>

    <script src="../assets/nav.js"></script>
    <script src="../assets/site.js"></script>
  </body>
</html>
